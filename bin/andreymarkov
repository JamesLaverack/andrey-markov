#!/usr/bin/env ruby

require "andreymarkov"


AndreyMarkov.configure do |configuration|
  configuration.channel = "#bag"
  configuration.server  = "irc.synirc.net"
  configuration.nick    = "AndreyMarkov"
  configuration.speak_percent = 0.03
  configuration.verbose = true
  #spam every 20 minutes (on average)
  configuration.tick_probability = 1.0/240
end

File.open(".andrey.pid", "w") do |f|
  f.write Process.pid.to_s
end

ci = AndreyMarkovConfiguration.instance

bot = Cinch::Bot.new do
  configure do |c|
    c.server = ci.server
    c.channels = [ci.channel]
    c.nick = ci.nick
    c.plugins.plugins = [AndreyMarkov]
  end
end

bot.start
